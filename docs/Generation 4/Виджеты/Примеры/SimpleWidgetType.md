# Простой виджет

В данном уроке мы создадим простой виджет, который будет ссодержать текст, изображение и несколько настроек.

#### Шаг 1 (snippet.liquid)

Создаем файл snippet.liquid или мы можем поменять код в редакторе, нажав кнопку "редактировать код". Используем html разметку и liquid код, который отделется двумя фигурными скобками - `{{ code }}`. В примере ниже мы указываем настройку виджета `widget_settings.banner_name`, слева в редакторе пользователь сможет поменять текст данной настройки. Пример кода:

```html
<div class="banner-list__item-title h2">
  {{ widget_settings.banner_name }}
</div>
<div class="banner-list__item-content">
  {{ widget_settings.banner_content }}
</div>
```

#### Шаг 2 (settings_form.json)

Теперь в файле settings_form.json мы прописываем настройку с полем <a href="/Generation%204/Виджеты/Структура/settings_form/#setting_form_text">типа</a> `text` и поле с настройкой  <a href="/Generation%204/Виджеты/Структура/settings_form/#setting_form_rich_texts">типа</a> `rich-text`.
```json
{
    "{{ messages.content }}": [
      {
        "items": [
          {
            "class": "text",
            "name": "banner_name",
            "label": "{{ messages.title }}",
            "value": null,
            "type": "text",
            "general": true
          },
          {
            "name": "banner_content",
            "label": "{{ messages.main_text }}",
            "value": null,
            "type": "rich-text",
            "general": true
          }
        ]
      }
    ]
  }
```

#### Шаг 3 (settings_data.json)



#### Шаг 4

```json
"handle":"system_widget_v4_alerts"
```

#### Шаг 5

```json
"sku":"NN1"
```

#### Шаг 6

```json
"page_kinds":["product,collection"]
```
Если указать например "collection" то виджет будет доступен только в шаблоне категории.
Может содержать элементы из следующего списка:

- all - все страницы
- index - главная страница
- collection - страница коллекций 
- product - страница продукта
- cart - страницы корзины
- page
- search  - страницы поиска
- blog - страницы блога
- compare - страница сравнения
- article - страница статьи
- favorite - страница избранного

#### Шаг 7

Привязка к типу виджетлиста. Доступные разделы страницы:

- Верхняя панель
- Шапка
- Контент
- Подвал
- Подвал
- Нижняя панельы
- Вне контента

Нужен чтобы, например, в виджетлисте сайдбара не было виджетов шапки/футера.

```json
"widget_list_kinds":["before_content", "content", "after_content"]
```
Может содержать элементы из следующего списка:

- before_content
- content
- after_content
- header
- footer
- sidebar
- outside

#### Шаг 8

Категории виджетов, нужна для сортировки виджетов по вкладкам. Категория баннеры:

```json
"widget_category_handle":"banner"
```

- Аналогичные товары | product-similar
- Баннеры	| banner
- Блог | blog
- Всплывающие окна	| modals
- Другие	| drugie
- Заголовки страниц	| page-title
- Информация о товаре	| product-info
- Карточки товара	| products-cards
- Комментарии	| comments
- Корзина	| cart
- Навигация	| navigation
- Описание категории	| collection-description
- Отзывы	| reviews
- Подвалы	| footers
- Подкатегории	| collection-subcollections
- Преимущества	| benefits
- Разделители	| delimeters
- Результаты поиска	| search-results
- Слайдеры	| sliders
- Сопутствующие товары	| product-related
- Сравнение	| compare
- Тексты и картинки	| text
- Товары в категории	| collection-products
- Товары в сайдбаре	| product-sidebar
- Товары на главной	| product-homepage
- Уведомления	| notices
- Фильтры	| filters
- Формы	| forms
- Шапки	| headers
- Ранее просмотренные товары | recently-viewed
- Избранное | favorites
- Статьи | articles
- Видео | video
- Истории | stories


#### Шаг 9 (Что должно получиться)
=== "SimpleWidgetType (виджет без блоков)"

    ![](/img/widget-w-blocks.jpg)

=== "block_list_widget_type (виджет с блоками)"

    ![](/img/widget-v-blocks.jpg)

```json
"block_template_handle": "system-banner-2"
```

Доступные шаблоны блоков:

- `system-banner` | Поля: Название (Текст), Изображение (Файл), Пропорции (Выпадающий список), Ссылка (Текст)
- `system-banner-2` | Поля: Название (Текст), Изображение (Файл), Пропорции (Выпадающий список), Ссылка (Текст)
- `system-banner-3` | Поля: Изображение (Файл), Ссылка (Текст)
- `system-banner-4` | Поля: Изображение (Файл)
- `system-banner-5` | Поля: Изображение (Файл), Изображение на мобильном (Файл), Заголовок (Текст), Текст (Текст), Текст на кнопке (Текст), Ссылка (Текст)
- `system-banner-6` | Поля: Изображение (Файл), Заголовок (Текст), Подзаголовок (Текст), Описание (HTML), Текст ссылки (Текст), Ссылка (Текст), Выравнивание текста (Выпадающий список)
- `system-banner-7` | Поля: Картинка (Файл), Ссылка (Универсальная ссылка)
- `system-banner-8` | Поля: Название (Текст), Изображение (Файл), Ссылка (Универсальная ссылка)
- `Баннер` | Поля: Название (Текст), Описание (HTML), Изображение (Файл), Ссылка (Текст), Текст ссылки (Текст)
- `system-banner-block-2` | Поля: Название (Текст), Описание (HTML), Изображение (Файл), Ссылка (Универсальная ссылка), Текст ссылки (Текст)
- `system-banner-block-3` | Поля: Название (Текст), Описание (HTML), Карта (Текст)
- `system-banner-image-text` | Поля: Изображение (Файл), Положение изображения (Выпадающий список), Ссылка на изображение (Текст), Текст (HTML)
- `system-banner-mansonry` | Поля: Название (Текст), Контент (HTML), Ссылка (Текст), Изображение (Файл), Соотношение сторон (Высота / Ширина) (Выпадающий список)
- `system-banner-video` <a name="blocks_example"></a> | Поля: Ссылка (Текст), Заставка (Файл)
- `system-banner-video-2` | Поля: Ссылка (Универсальная ссылка), Заставка (Файл)
- `system-benefit` | Поля: Описание (Текст), Изображение (Файл)
- `system-benefit-2` | Поля: Заголовок (Текст), Описание (HTML), Изображение (Файл)
- `system-collection` | Поля: Категория (Категория)
- `system-collection-2` | Поля: Название вкладки (Текст), Категория (Категория)
- `system-collection-3` | Поля: Категория (Категория), Заголовок (Текст),Изображение (Файл)
- `system-collection-4` | Поля: Категория (Категория), Изображение категории (Файл)
- `system-collection-5` | Поля: Товар (Товар), Расположение по горизонтали (Число из диапазона с полем ввода), Расположение по вертикали (Число из диапазона с полем ввода), Скрывать цену (Чекбокс), Скрывать название (Чекбокс), Скрывать изображение (Чекбокс)
- `system-collection-with-description` | Поля: Коллекция (Категория), Описание (HTML)

- `system-custom-block` | Поля: Контент (HTML), Фон (Выпадающий список), Ширина блока (Выпадающий список), Ширина блока на планшете (Выпадающий список), Ширина блока на телефоне (Выпадающий список), Вертикальное выравнивание внутри блока (Выпадающий список), Вертикальный отступ блока (Выпадающий список), Горизонтальный отступ блока (Выпадающий список), Скругление углов (Выпадающий список)

- `system-element-header` | Поля: Элемент (Выпадающий список), Ширина блока [десктоп] (Выпадающий список), Выравнивание [десктоп] (Выпадающий список), Скрыть [десктоп] (Чекбокс), Ширина блока [планшет] (Выпадающий список), Выравнивание [планшет] (Выпадающий список), Скрыть [планшет] (Чекбокс), Ширина блока [телефон] (Выпадающий список), Выравнивание [телефон] (Выпадающий список), Скрыть [телефон] (Чекбокс), Контент для элемента "Текст" (HTML)

- `system-faq` | Поля: Вопрос (Текст), Ответ (HTML)

- `system-faq-2` | Поля: 	Вопрос (Текст), Ответ (HTML)
- `system-form-constructor` | Поля: Название поля (Текст), Тип поля (Выпадающий список), Значения (через запятую) (Только для групп чекбоксов, радио и списка) (Текст), Обязательное поле (Чекбокс)

- `system-form-constructor-2` | Поля: Тип поля (Выпадающий список), Ширина поля (Выпадающий список), Название поля (Текст), Подсказка (только для текст и текстовая область) (Текст), Значения (через запятую) (Только для групп чекбоксов, радио и списка) (Текст), Обязательное поле (Чекбокс)

- `system-form-constructor-3` | Поля: Тип поля (Выпадающий список), Название поля (Текст), Обязательное поле (Чекбокс)

- `system-image` | Поля: Название (Текст), Изображение (Файл)

- `system-image-and-content` | Поля: Вертикальная позиция изображения (Выпадающий список), Скрыть изображение? (Чекбокс), Текст (HTML), Горизонтальная позиция изображения (Выпадающий список), Изображение (Файл)

- `system-image-link-text` | Поля: Изображение (Файл), Кнопка (Текст), Текст кнопки (Текст)
- `system-image_text` | Поля: Текст (HTML), Изображение (Файл)
- `system-image-text-button-icon` | Поля: Название (Текст), Описание (HTML), Изображение (Файл), Ссылка (Текст), Текст кнопки (Текст), Иконка (Файл)
- `system-messenger` | Поля: Заголовок (Текст), Иконка (Выпадающий список), Ссылка (Текст), Цвет (Текст)
- `system-messengers` | Поля: Заголовок (Текст), Иконка (Выпадающий список), Ссылка (Текст), Цвет (Цвет)
- `system-payments` | Поля: Ссылка (Текст)
- `system-payments-prime` | Поля: Иконка (Файл), Название (title) (Текст)
- `system-payments-social` | Поля: Название (Текст), Иконка (Файл), Тип (Выпадающий список), Ссылка (Текст)
- `system-personal` | Поля: Изображение (Файл), Описание (HTML), Подзаголовок (Текст), Заголовок (Текст)
- `system-promo-slide` | Поля: Описание (Текст), Изображение (Файл), Ссылка (Текст)
- `system-promo-slide-2` | Поля: Описание (Текст), Изображение (Файл), Ссылка (Универсальная ссылка)
- `system-promo-slider-2` | Поля: Заголовок (Текст), Описание (Текст), Ссылка (Текст), Изображение (Файл), Надпись на кнопке (Текст)
- `system-promo-slider-3` | Поля: Надпись на кнопке (Текст), Изображение для мобильных устройств (Файл), Изображение (Файл), Ссылка (Текст), Описание (Текст), Заголовок (Текст)
- `system-promo-slider-4` | Поля: Описание (Текст), Заголовок (Текст), Ссылка (Текст), Изображение (Файл)
- `system-promo-slider-5` | Поля: Заголовок (Текст), Описание (Текст), Ссылка (Универсальная ссылка), Изображение (Файл), Надпись на кнопке (Текст)
- `system-promo-slider-6` | Поля: Изображение (Файл), Изображение для мобильных устройств (Файл),Заголовок (Текст), Описание (Текст), Ссылка (Универсальная ссылка), Надпись на кнопке (Текст)
- `system-promo-slider-7` | Поля: Описание (Текст), Заголовок (Текст), Ссылка (Универсальная ссылка), Изображение (Файл)
- `system-promo-slider-8` | Поля: Изображение (Файл), Изображение для мобильных устройств (Файл),Заголовок (Текст), Описание (Текст), Ссылка (Универсальная ссылка)
- `system-review` | Поля: Скрыть изображение? (Чекбокс), Текст (HTML), Имя (Текст), Позиция изображения (Выпадающий список), Изображение (Файл)
- `system-review-2` | Поля: Скрыть изображение? (Чекбокс), Имя (Текст), Текст (HTML), Изображение (Файл)
- `system-review-4` | Поля: Заголовок (Текст), Подзаголовок (Текст), Текст (HTML), Изображение (Файл), Скрыть изображение? (Чекбокс)
- `system-review-shop` | Поля: Имя (Текст), Текст (HTML), Рейтинг (Число из диапазона со слайдером), Дата (Текст), Изображение (Файл), Скрыть изображение? (Чекбокс)
- `system-review-social` | Поля: Ссылка (Текст)
- `system-social-2` | Поля: Иконка (Выпадающий список), Ссылка (Текст)
- `system-special_products` | Поля: Заголовок (Текст), Категория (Категория)
- `system-text-column` | Поля: Контент (HTML)
- `system-text-hex` | Поля: Название (Текст), Цвет (hex формат) (Текст)
- `system-text-hex-2` | Поля: Название (Текст), Цвет (Цвет)
- `system-text-link` | Поля: Текст (Текст), Ссылка (Универсальная ссылка)
- `system-title-and-content` | Поля: Содержание (HTML)
- `system-widget-feedback` | Поля: Текст на кнопке (Текст)

Пример:
```json
{
  "type": "BlockListWidgetType",
  "handle": "system_widget_v4_stories_3",
  "sku": "ES2",
  "page_kinds": [
    "all"
  ],
  "widget_list_kinds": [
    "before_content",
    "content",
    "after_content",
    "footer"
  ],
  "generation": 4,
  "name": {
    "ru": "Истории",
    "en": "Stories",
    "es": "Cuentos"
  },
  "description": {
    "ru": "Истории в виде изображений",
    "en": "Stories as images",
    "es": "Historias como imágenes"
  },
  "widget_category_handle": "stories",
  "libraries": [
    "fslightbox",
    "jquery",
    "splide3",
    "my-layout",
    "vanilla-lazyload"
  ],
  "block_template_handle": "system-image-link-text"
}

```

### Зависимости

Библиотеки виджета

```json
"libraries": [
  "commonjs_v2",
  "jquery",
  "my-layout",
  "swiper"
]
```
Доступные зависимости (плагины). Зависимости используются только те, которые установлены на стороне платформы:

- commonjs_v2 - Фреймворк InSales | <a href="https://liquidhub.ru/collection/start" target="_blank">Документация</a> 
- jquery | <a href="https://jquery.com/" target="_blank">Документация</a> 
- microalert	|<a href="https://github.com/VladimirIvanin/microAlert" target="_blank"> Github</a> 
- my-layout	| <a href="https://github.com/insales/my-layout" target="_blank">Github </a> 
- vanilla-lazyload | <a href="https://github.com/verlok/vanilla-lazyload" target="_blank">Github </a>
- splide | <a href="https://splidejs.com/" target="_blank">Документация </a>
- splide3 | <a href="https://splidejs.com/" target="_blank">Документация </a> 
- fslightbox | <a href="https://fslightbox.com/" target="_blank">Документация</a> 
- micromodal | <a href="https://micromodal.vercel.app/" target="_blank">Документация</a>
- body-scroll-lock | <a href="https://www.npmjs.com/package/body-scroll-lock" target="_blank">Документация</a>
- js-cookie | <a href="https://github.com/js-cookie/js-cookie/releases" target="_blank">Документация</a>
- cut-list | <a href=" https://github.com/insales/jquery.cut-list" target="_blank">Документация</a>
- nouislider | <a href=" https://refreshless.com/nouislider/" target="_blank">Документация</a>